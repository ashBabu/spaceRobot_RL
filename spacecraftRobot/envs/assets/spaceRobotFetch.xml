<?xml version="1.0" ?>
<mujoco model="free_floating_spacecraft_manipulator">
    <compiler angle="radian" coordinate="local"/>
    <option timestep="0.002" iterations="20">        
        <flag gravity="disable" />
    </option>
    <asset>
        <texture name="texplane" type="2d" builtin="checker" rgb1=".2 .3 .4" rgb2=".1 0.15 0.2" width="512" height="512"/>
        <material name="MatGnd" reflectance="0.5" texture="texplane" texrepeat="1 1" texuniform="true"/>
        <material name="block_mat" specular="0" shininess="0.5" reflectance="0" rgba="1 1 1 1"/>
        <mesh name="hand_col" file="meshes/collision/hand.stl"/>
        <mesh name="finger_col" file="meshes/collision/finger.stl" scale='1.75 1.0 1.75'/>
        <mesh name="hand_viz" file="meshes/visual/hand.stl"/>
        <mesh name="finger_viz" file="meshes/collision/finger.stl" scale='1.75 1.0 1.75'/>
    </asset>
    <size njmax="500" nconmax="100" />

<!-- <contact>       
        <exclude body1="right_upper_shoulder" body2="torso"/>
        <exclude body1="right_upper_shoulder" body2="right_upper_elbow"/>
        <exclude body1="right_lower_shoulder" body2="torso"/>

        <exclude body1="left_upper_shoulder" body2="torso"/>
        <exclude body1="left_upper_shoulder" body2="left_upper_elbow"/>
        <exclude body1="left_lower_shoulder" body2="torso"/>
        
        <exclude body1="collision_head_link_1" body2="torso"/>
        <exclude body1="collision_head_link_2" body2="torso"/>
        <exclude body1="r_gripper_r_finger" body2="r_gripper_l_finger"/>
        <exclude body1="l_gripper_r_finger" body2="l_gripper_l_finger"/>
    </contact>
 -->

    <default>
        <default class="panda">
            <joint pos="0 0 0" axis="0 0 1" limited="true"/>
            <position forcelimited="true" ctrllimited="true" user="1002 40 2001 -0.005 0.005"/>
            <default class="spaceRobot_viz">
                <geom contype="0" conaffinity="0" group="0" type="mesh" rgba=".95 .99 .92 1" mass="0"/>
            </default>

            <default class="spaceRobot_col">
                <geom contype="1" conaffinity="1" group="3" type="mesh" rgba=".5 .6 .7 1"/>
            </default>

             <default class="spaceRobot_finger">
                <joint damping="100" armature='5'/>
                <geom friction="1 0.5 0.0001" solref="0.01 1" solimp="0.8 0.9 0.001" margin="0.001" user="0" rgba="0.5 0.6 0.7 .4" contype="1" conaffinity="0" condim="6" group="3" />
                <position user="1002 40 2001 -0.0001 0.0001"/>
            </default>
        </default>
    </default>

    <worldbody>
        <light directional="false" diffuse=".8 .8 .8" specular="0.3 0.3 0.3" pos="1  1 3" dir="-1 -1 -3"/>
        <light directional="false" diffuse=".8 .8 .8" specular="0.3 0.3 0.3" pos="1 -1 3" dir="-1 1 -3"/>
        <light directional="false" diffuse=".8 .8 .8" specular="0.3 0.3 0.3" pos="-1 0 3" dir="1 0 -3" />
        <!-- <geom name="ground" pos="0 0 0" size="20 20 20" material="MatGnd" type="plane" contype="1" conaffinity="1"/> -->
        <site name="target0" pos="-2 0 5.5" rgba="0.2 0.6 0.2 0.25" size=".05" type="sphere" />

        <body mocap="true" name="spacecraft_mocap" pos="-1.20130298 -1.20384954  5. ">
            <geom conaffinity="0" contype="0" pos="0 0 0" rgba="0 0.5 0 0.7" size="0.005 0.005 0.005" type="box"/>
            <geom conaffinity="0" contype="0" pos="0 0 0" rgba="0 0.5 0 0.1" size="1 0.005 0.005" type="box"/>
            <geom conaffinity="0" contype="0" pos="0 0 0" rgba="0 0.5 0 0.1" size="0.005 1 0.001" type="box"/>
            <geom conaffinity="0" contype="0" pos="0 0 0" rgba="0 0.5 0 0.1" size="0.005 0.005 1" type="box"/>
        </body>


<!--        <body name="sdebris" pos="-2 3 5.5" >-->
<!--            <inertial mass="20" pos="0 0 0" diaginertia="14 14 20"/>-->
<!--            <joint name="freeDebrisJoint" type="free"/>-->
<!--            <geom size="0.05 0.05 0.15" type="box" rgba=".7 .4 0.6 0.9" />-->
<!--            <site name="debrisSite" pos="0 0 0" type="sphere" size="0.01" rgba="0.1 0.2 0.3 1" />-->
<!--        </body>-->
        <body name="object0" pos="-3 -1 5.5">
            <joint name="object0:joint" type="free" damping="0.01"/>
            <geom size="0.025 0.025 0.025" type="box" condim="3" name="object0" material="block_mat" mass="2"/>
            <site name="object0" pos="0 0 0" size="0.02 0.02 0.02" rgba="1 0 0 1"/>
        </body>

        <body name="spacecraft_base" pos="0 0 5" >
            <site name="baseSite" pos="0 0 0" type="sphere" size="0.01" rgba="0.1 0.2 0.3 1" />
            <inertial mass="100" pos="0 0 0" diaginertia="1400 1400 1040"/>
            <joint name="spacecraft_BasefloatingJoint" type="free" damping="1e+11" />  <!--  -->
            <geom size="1.05 1.05 1.05" type="box" rgba="1 1 0.6 1" />
            <body name="spacecraft_link1" pos="1.2268 1.2268 0" quat="0.653281 -0.653281 0.270598 -0.270598">
                <inertial pos="0 0 0" mass="20" diaginertia="0.1 0.1 0.1" />
                <joint name="spacecraft_joint1" pos="0 0 0" axis="0 0 1" limited="true" range="-2.8973 2.8973" damping="200"/>
                <geom size="0.04 0.25" type="cylinder" rgba="0 0 0.8 1" />
                <body name="spacecraft_link2" pos="-0.3182 0 -0.0682" euler="0 -2.355 0">
                    <inertial pos="0 0 0" quat="0.5 0.5 0.5 0.5" mass="30" diaginertia="25 25 0.25" />
                    <joint name="spacecraft_joint2" pos="0 0 -0.45" axis="0 1 0" limited="true" range="-1.7628 1.7628" damping="200"/>
                    <geom size="0.04 0.45" type="cylinder" rgba="0 0.5 0.8 1" />
                    <body name="spacecraft_link3" pos="0 0 0.90" euler="0 0 0">
                        <inertial pos="0 0 0" quat="0.5 0.5 0.5 0.5" mass="30" diaginertia="25 25 0.25" />
                        <joint name="spacecraft_joint3" pos="0 0 -0.45" axis="1 0 0" limited="true" range="-1.7628 1.7628" damping="200"/>
                        <geom size="0.04 0.45" type="cylinder" rgba="0.5 0 0.8 1" />
                        <body name="spacecraft_link4" pos="0 0 0.85" euler="0 0 0">
                            <inertial pos="0 0 0" quat="0.5 0.5 0.5 0.5" mass="20" diaginertia="25 25 0.25" />
                            <joint name="spacecraft_joint4" pos="0 0 -0.4" axis="0 1 0" limited="true" range="-1.7628 1.7628" damping="200"/>
                            <geom size="0.04 0.4" type="cylinder" rgba="0.5 0.5 0.8 1" />
                            <body name="spacecraft_link5" pos="-0.4 0 0.4" euler="0 -1.57 0">
                                <inertial pos="0 0 0" quat="0.5 0.5 0.5 0.5" mass="20" diaginertia="25 25 0.25" />
                                <joint name="spacecraft_joint5" pos="0 0 -0.4" axis="1 0 0" limited="true" range="-1.7628 1.7628" damping="200"/>
                                <geom size="0.04 0.4" type="cylinder" rgba="0.5 0 0.8 0.5" />
                                <body name="spacecraft_link6" pos="0 0 0.8" euler="0 0 0">
                                    <inertial pos="0 0 0" quat="0.5 0.5 0.5 0.5" mass="20" diaginertia="25 25 0.25" />
                                    <joint name="spacecraft_joint6" pos="0 0 -0.4" axis="0 1 0" limited="true" range="-1.7628 1.7628" damping="200"/>
                                    <geom size="0.04 0.4" type="cylinder" rgba="0.5 0.5 0.5 1" />
                                    <body name="spacecraft_link7" pos="0 0 0.85" euler="0 0 0">
                                        <inertial pos="0 0 0" quat="0.5 0.5 0.5 0.5" mass="20" diaginertia="25 25 0.25" />
                                        <joint name="spacecraft_joint7" pos="0 0 0" axis="0 0 1" limited="true" range="-1.7628 1.7628" damping="200" />
                                        <geom size="0.04 0.45" type="cylinder" rgba="0.2 0.3 0.4 0.5" />
                                        <geom pos="0 0 0.45" euler='0 0 -1.57' class="spaceRobot_viz" mesh="hand_viz"/>
                                        <geom pos="0 0 0.45" euler='0 0 -1.57' class="spaceRobot_col" mesh="hand_col" mass="0.81909"/>
                                        <site name='gripper' pos='0 0 0.56' size='.01' type="sphere" euler='0 0 -0.785398'/>
                                        <!-- <site name='end_effector' pos='0 0 0.56' size='0.01' euler='0 0 -0.785398'/> -->

                                        <body name="leftfingerJoint" pos="0 0 0.5154" euler='0 0 -1.57' childclass='spaceRobot_finger'>
                                            <inertial pos="-1.57863e-05 0.0118731 0.0434103" quat="0.705868 0.0310348 -0.0314925 0.706962" mass="0.0927059" diaginertia="6.57134e-05 6.09611e-05 1.09932e-05" />
                                            <joint name="spacecraft_finger_joint1"  axis="0 1 0" type="slide" range="0 0.04" class="spaceRobot_finger"/>

                                            <geom class="spaceRobot_viz" mesh="finger_viz"/>
                                            <!-- <geom class="spaceRobot_col" mesh="finger_col"/> -->
                                            <geom size="0.0070" fromto=".009 .006 .0875   -.009 .009 .0875" type="capsule" />
                                            <geom size="0.0070" fromto=".009 .009 .0875   -.009 .006 .0875" type="capsule" />

                                            <geom size="0.0075" fromto=".009 .007 .0775   -.009 .010 .0775" type="capsule" />
                                            <geom size="0.0075" fromto=".009 .010 .0775   -.009 .007 .0775" type="capsule" />

                                            <geom size="0.0082" fromto=".009 .008 .0675   -.009 .011 .0675" type="capsule" />
                                            <geom size="0.0082" fromto=".009 .011 .0675   -.009 .008 .0675" type="capsule" />

                                            <geom size="0.0090" fromto=".009 .009 .0575   -.009 .012 .0575" type="capsule" />
                                            <geom size="0.0090" fromto=".009 .012 .0575   -.009 .009 .0575" type="capsule" />

                                            <geom size="0.0100" fromto=".009 .0105 .0475   -.009 .0135 .0475" type="capsule" />
                                            <geom size="0.0100" fromto=".009 .0135 .0475   -.009 .0105 .0475" type="capsule" />

                                            <geom size="0.0110" fromto=".009 .012 .035   -.009 .015 .035" type="capsule" />
                                            <geom size="0.0110" fromto=".009 .015 .035   -.009 .012 .035" type="capsule" />

                                            <geom size="0.0185 0.0120 0.0175" pos="0 0.014 0.015" type="box" euler='.03 0 0' />
                                        </body>

                                        <body name="rightfingerJoint" pos="0 0 0.5154" euler='0 0 -1.57'  childclass='spaceRobot_finger'>
                                            <inertial pos="1.57863e-05 -0.0118731 0.0434103" quat="0.705868 -0.0310348 0.0314925 0.706962" mass="0.0927059" diaginertia="6.57134e-05 6.09611e-05 1.09932e-05" />
                                            <joint name="spacecraft_finger_joint2" axis="0 -1 0" type="slide" range="0 0.04" class="spaceRobot_finger"/>

                                            <geom quat="0 0 0 1" class="spaceRobot_viz" mesh="finger_viz"/>
                                            <!-- <geom class="spaceRobot_col" mesh="finger_col"/> -->
                                            <geom size="0.0070" fromto=".009 -.006 .0875   -.009 -.009 .0875" type="capsule" />
                                            <geom size="0.0070" fromto=".009 -.009 .0875   -.009 -.006 .0875" type="capsule" />

                                            <geom size="0.0075" fromto=".009 -.007 .0775   -.009 -.010 .0775" type="capsule" />
                                            <geom size="0.0075" fromto=".009 -.010 .0775   -.009 -.007 .0775" type="capsule" />

                                            <geom size="0.0082" fromto=".009 -.008 .0675   -.009 -.011 .0675" type="capsule" />
                                            <geom size="0.0082" fromto=".009 -.011 .0675   -.009 -.008 .0675" type="capsule" />

                                            <geom size="0.0090" fromto=".009 -.009 .0575   -.009 -.012 .0575" type="capsule" />
                                            <geom size="0.0090" fromto=".009 -.012 .0575   -.009 -.009 .0575" type="capsule" />

                                            <geom size="0.0100" fromto=".009 -.0105 .0475   -.009 -.0135 .0475" type="capsule" />
                                            <geom size="0.0100" fromto=".009 -.0135 .0475   -.009 -.0105 .0475" type="capsule" />

                                            <geom size="0.0110" fromto=".009 -.012 .035   -.009 -.015 .035" type="capsule" />
                                            <geom size="0.0110" fromto=".009 -.015 .035   -.009 -.012 .035" type="capsule" />

                                            <geom size="0.0185 0.0120 0.0175" pos="0 -.014 0.015" type="box" euler='-.03 0 0' />
                                        </body>
                                    </body>
                                </body>
                            </body>
                        </body>
                    </body> 
                </body>
            </body>
        </body>
    </worldbody> 

    <equality>
        <weld body1="spacecraft_mocap" body2="spacecraft_link7" solimp="0.9 0.95 0.001" solref="0.02 1"/>
    </equality>

    <contact>
        <exclude body1="spacecraft_base" body2="spacecraft_link1" />
        <exclude body1="spacecraft_base" body2="spacecraft_link2" />
        <exclude body1="spacecraft_base" body2="spacecraft_link3" />
        <exclude body1="spacecraft_base" body2="spacecraft_link4" />
        <exclude body1="spacecraft_base" body2="spacecraft_link5" />
        <exclude body1="spacecraft_base" body2="spacecraft_link6" />
        <exclude body1="spacecraft_base" body2="spacecraft_link7" />
    </contact>

    <!-- <actuator>
        <position name="motor1" joint="sjoint1" kp="870" forcerange="-87 87" ctrlrange="-2.9671 2.9671"/> 
        <position name="motor2" joint="sjoint2" kp="870" forcerange="-87 87" ctrlrange="-1.8326 1.8326"/> 
        <position name="motor3" joint="sjoint3" kp="870" forcerange="-87 87" ctrlrange="-2.9671 2.9671"/> 
        <position name="motor4" joint="sjoint4" kp="870" forcerange="-87 87" ctrlrange="-3.1416 0.0"/> 
        <position name="motor5" joint="sjoint5" kp="120" forcerange="-12 12" ctrlrange="-2.9671 2.9671"/>
        <position name="motor6" joint="sjoint6" kp="120" forcerange="-12 12" ctrlrange="-3.7525 2.1817"/> 
        <position name="motor7" joint="sjoint7" kp="120" forcerange="-12 12" ctrlrange="-2.9671 2.9671"/> 
        <position name="r_gripper_finger_joint" joint="finger_joint1" class="spaceRobot_finger" kp="500" forcerange="-70 70" ctrlrange="0 0.04"/>
        <position name="l_gripper_finger_joint" joint="finger_joint2" class="spaceRobot_finger" kp="500" forcerange="-70 70" ctrlrange="0 0.04"/>
    </actuator> -->

    <actuator>
<!--        <motor name="motor1" joint="sjoint1" ctrlrange="-200 200" ctrllimited="true" />  &lt;!&ndash; gear='32' &ndash;&gt;-->
<!--        <motor name="motor2" joint="sjoint2" ctrlrange="-200 200" ctrllimited="true" />  &lt;!&ndash; gear='32' &ndash;&gt;-->
<!--        <motor name="motor3" joint="sjoint3" ctrlrange="-200 200" ctrllimited="true" />  &lt;!&ndash; gear='32' &ndash;&gt;-->
<!--        <motor name="motor4" joint="sjoint4" ctrlrange="-200 200" ctrllimited="true" />  &lt;!&ndash; gear='32' &ndash;&gt;-->
<!--        <motor name="motor5" joint="sjoint5" ctrlrange="-200 200" ctrllimited="true" />  &lt;!&ndash; gear='32' &ndash;&gt;-->
<!--        <motor name="motor6" joint="sjoint6" ctrlrange="-200 200" ctrllimited="true" />  &lt;!&ndash; gear='32' &ndash;&gt;-->
<!--        <motor name="motor7" joint="sjoint7" ctrlrange="-200 200" ctrllimited="true" />  &lt;!&ndash; gear='32' &ndash;&gt;-->
        <!-- <position name="r_grip_finger_joint" joint="finger_joint1" class="spaceRobot_finger" kp="500" forcerange="-70 70" ctrlrange="0 0.04"/> -->
<!--        <position name="l_grip_finger_joint" joint="finger_joint2" class="spaceRobot_finger" kp="500" forcerange="-70 70" ctrlrange="0 0.04"/>-->

        <position ctrllimited="true" ctrlrange="0 0.2" joint="spacecraft_finger_joint1" kp="30000" name="leftfingerJoint"/>
        <position ctrllimited="true" ctrlrange="0 0.2" joint="spacecraft_finger_joint2" kp="30000" name="rightfingerJoint"/>

    </actuator>

    <sensor>
        <gyro name="baseGyro" site="baseSite" noise="0.001" />
        <accelerometer name="baseAccel" site="baseSite" noise="0.001" />
        <jointpos name="encoderPos1" joint="spacecraft_joint1" noise="0.001" />
        <jointpos name="encoderPos2" joint="spacecraft_joint2" noise="0.001" /> 
        <jointpos name="encoderPos3" joint="spacecraft_joint3" noise="0.001" /> 
        <jointpos name="encoderPos4" joint="spacecraft_joint4" noise="0.001" />
        <jointpos name="encoderPos5" joint="spacecraft_joint5" noise="0.001" /> 
        <jointpos name="encoderPos6" joint="spacecraft_joint6" noise="0.001" /> 
        <jointpos name="encoderPos7" joint="spacecraft_joint7" noise="0.001" /> 
        
        <jointvel name="encoderVel1" joint="spacecraft_joint1" noise="0.001" />
        <jointvel name="encoderVel2" joint="spacecraft_joint2" noise="0.001" /> 
        <jointvel name="encoderVel3" joint="spacecraft_joint3" noise="0.001" /> 
        <jointvel name="encoderVel4" joint="spacecraft_joint4" noise="0.001" /> 
        <jointvel name="encoderVel5" joint="spacecraft_joint5" noise="0.001" /> 
        <jointvel name="encoderVel6" joint="spacecraft_joint6" noise="0.001" /> 
        <jointvel name="encoderVel7" joint="spacecraft_joint7" noise="0.001" /> 
    </sensor>

</mujoco>

